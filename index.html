<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script src="plot.js"></script>
    <script src="layers.js"></script>
    <script src="util.js"></script>
    <script src="map.js"></script>

    <link rel="stylesheet" href="style.css" />
    <title>d3Sf Police Incidents</title>
  </head>
  <body>
    <form id="userform" class="dateInputForm">
      <label>Start date</label>
      <input
        id="startDate"
        type="date"
        name="myDate"
        min="2018-01-01"
        max="2018-03-30"
        value="2018-01-01"
      />

      <label>End date</label>
      <input
        id="endDate"
        type="date"
        name="myDate"
        min="2018-01-01"
        max="2018-03-30"
        value="2018-01-15"
      />
      <input id="formsubmit" type="submit" value="display" />
      <label>Visualization of SF Police Calls for Service and Incidents</label>
      <label>
        unresolved
        <svg height="10" width="10">
          <circle
            cx="2"
            cy="2"
            r="2"
            stroke="black"
            stroke-width="1"
            fill="red"
          />
        </svg>
      </label>

      <label>
        resolved
        <svg height="10" width="10">
          <circle
            cx="2"
            cy="2"
            r="2"
            stroke="black"
            stroke-width="1"
            fill="green"
          />
        </svg>
      </label>
      <input id="initial-state" type="hidden" value="false" />
    </form>

    <script>
      let userForm = document.getElementById("userform");
      let ev;
      userForm.onsubmit = event => {
        if (event) event.preventDefault();

        const startDate = document.getElementById("startDate").value;
        const endDate = document.getElementById("endDate").value;
        getData({ startDate, endDate });
      };

      userForm.onsubmit();
    </script>
  </body>
</html>
