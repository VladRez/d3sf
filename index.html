<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script src="plot.js"></script>
    <script src="layers.js"></script>
    <script src="util.js"></script>
    <link rel="stylesheet" href="style.css" />

    <title>D3 Sf</title>
  </head>
  <body>
    <!-- <svg width="100%" height="1200px"></svg> -->
    <script>
      d3.queue()
        .defer(d3.json, "data/euSfGeo.json")
        .defer(d3.json, "data/PoliceDistricts.json")
        .defer(d3.csv, "data/2018pdi.csv")
        .await((err, mapData, pdData, dotData) => {
          const sfMap = initMap();

          drawMap(err, mapData, sfMap.path);
          drawPDMap(err, pdData, sfMap.path);
          plotDots(err, dotData, sfMap.projection)
          let result = util.pivot.incidentByDistrict(dotData);
          console.log(result);
        });
    </script>
  </body>
</html>
